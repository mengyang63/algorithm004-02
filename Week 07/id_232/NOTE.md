## 位运算

### 常见的位操作

#### 异或常见操作

- x ^ 0 = x
- x ^ 1s = ~x (1s 为全为1的二进制数)
- x ^ (~x) = 1s
- x ^ x = 0
- 交换两个数  c = a ^ b   = >   a ^ c = b , b ^ c = a  
- 满足交换律  a ^ b ^ c = a ^ (b ^ c) = (a ^ b) ^ c 

#### 其他常见操作

- 打掉最低位的1：n & (n - 1)
- 将x最右边的n位清零 ： x & (~0 << n)
- 获取x的第n位值 （0 or 1）：(x >> n) & 1
- 获取x的第n位的幂值 ： x & (1 << (n - 1))
- 仅将第n位变为1： x | (1 << n)
- 仅将第n位变为0：x & (1 << (n - 1))
- 将x最高位至第n位(含)清零：x & ((1 << n) - 1)
- 将第n位至第0位（含）清零：x & (~ (1 << (n + 1)) - 1)

#### 实战要点

- 判断奇偶
  - (x & 1) == 1
  - (x & 1) == 0
- x >> 1 = x / 2
- 清零最低位的1 ： x = x & (x - 1)
- 得到最低位的1 ： x  & -x 
- x & ~x = 0

## 布隆过滤器

#### 查找

- 存在的话， 只能说可能存在
- 不存在的话，肯定不在

#### 用途

在最外层判断缓存， 如果存在就去DB查， 最后不管在不在， DB会给正确的答案；

如果不存在， 那就不去DB查了

- 比特币网络
- 分布式系统（Map-Reduce） - Hadoop、search engine
- Redis缓存
- 垃圾邮件、评论等过滤

